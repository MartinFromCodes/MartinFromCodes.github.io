
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>ClarWan Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="ClarWan">
    
    <meta name="description" content="C 语言学习笔记最近工作之余学习一下c语言，先说一下我的 学习经历：在学校的时候学过C#和java仅仅和一些前端方面的html、js和简单的数据库sql语句。后来毕业工作了之后主要做.net程序开发bs和cs都接触过。现在学习一下C语言这门经典的编程语言。
C# 和 C记得刚开始学习C#的时候老师就">
    
    
    
    
    <link rel="alternate" href="/auom.xmlns" title="ClarWan Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="ClarWan Blog" title="ClarWan Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="ClarWan Blog">ClarWan Blog</a></h1>
				<h2 class="blog-motto">.net程序员，时间管理，自我管理，阅读，写作，程序员的自留地</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					
						
						
     						<li><a href="/">Home</a></li>
							
					
						
						
     						<li><a href="/archives">Archives</a></li>
							
					
						
						
     						<li><a href="/tags">Tags</a></li>
							
					
						
						
     						<li><a href="/categories">Categories</a></li>
							
					
						
						
							    <li><a href="/about/resume.html" target="_blank" >Resume</a></li>
							
					

					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/10/16/C语言学习笔记/" title="" itemprop="url"></a>
  </h1>
  <p class="article-author">By
    
      <a href="http://yoursite.com" title="ClarWan">ClarWan</a>
    </p>
  <p class="article-time">
    <time datetime="2017-10-16T14:22:23.238Z" itemprop="datePublished">2017-10-16</time>
    更新日期:<time datetime="2017-10-23T15:11:33.320Z" itemprop="dateModified">2017-10-23</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#C-语言学习笔记"><span class="toc-number">1.</span> <span class="toc-text">C 语言学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#C-和-C"><span class="toc-number">1.1.</span> <span class="toc-text">C# 和 C</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#个人感觉"><span class="toc-number">1.2.</span> <span class="toc-text">个人感觉</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#相同的"><span class="toc-number">1.2.1.</span> <span class="toc-text">相同的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不同"><span class="toc-number">1.2.2.</span> <span class="toc-text">不同</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一些关键字和概念"><span class="toc-number">1.3.</span> <span class="toc-text">一些关键字和概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#变量的定义"><span class="toc-number">1.3.1.</span> <span class="toc-text">变量的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#存储类"><span class="toc-number">1.3.2.</span> <span class="toc-text">存储类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#运算符"><span class="toc-number">1.3.3.</span> <span class="toc-text">运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#判断符"><span class="toc-number">1.3.4.</span> <span class="toc-text">判断符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#循环"><span class="toc-number">1.3.5.</span> <span class="toc-text">循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数"><span class="toc-number">1.3.6.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数组"><span class="toc-number">1.3.7.</span> <span class="toc-text">数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-指针"><span class="toc-number">1.3.8.</span> <span class="toc-text">C 指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-字符串"><span class="toc-number">1.3.9.</span> <span class="toc-text">C 字符串</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C-结构体"><span class="toc-number">1.4.</span> <span class="toc-text">C 结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定义结构"><span class="toc-number">1.4.1.</span> <span class="toc-text">定义结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#共用体"><span class="toc-number">1.4.2.</span> <span class="toc-text">共用体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-位域"><span class="toc-number">1.4.3.</span> <span class="toc-text">C 位域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-typedef"><span class="toc-number">1.4.4.</span> <span class="toc-text">C typedef</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C-预处理器"><span class="toc-number">1.5.</span> <span class="toc-text">C 预处理器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C语言中的内存管理"><span class="toc-number">1.6.</span> <span class="toc-text">C语言中的内存管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#其他引用"><span class="toc-number">1.6.1.</span> <span class="toc-text">其他引用</span></a></li></ol></li></ol></li></ol>
		</div>
		
		<h1 id="C-语言学习笔记"><a href="#C-语言学习笔记" class="headerlink" title="C 语言学习笔记"></a>C 语言学习笔记</h1><p>最近工作之余学习一下c语言，先说一下我的 学习经历：在学校的时候学过C#和java仅仅和一些前端方面的html、js和简单的数据库sql语句。后来毕业工作了之后主要做.net程序开发bs和cs都接触过。现在学习一下C语言这门经典的编程语言。</p>
<h2 id="C-和-C"><a href="#C-和-C" class="headerlink" title="C# 和 C"></a>C# 和 C</h2><p>记得刚开始学习C#的时候老师就说过C#是一种面向对象的高级语言。</p>
<p>这是网上的简介: C 语言是一种通用的、面向过程式的计算机程序设计语言。1972 年，为了移植与开发 UNIX 操作系统，丹尼斯·里奇在贝尔电话实验室设计开发了 C 语言。<br>C 语言是一种广泛使用的计算机语言，它与 Java 编程语言一样普及，二者在现代软件程序员之间都得到广泛使用。<br>这么广泛的语言肯定是要学习一下!</p>
<h2 id="个人感觉"><a href="#个人感觉" class="headerlink" title="个人感觉"></a>个人感觉</h2><p>说一下两种语言的一些基本想通的地方，C语言要早于C#出现主要是解决不同机器平台上汇编语言指令，将汇编语言的共同点提取出来了，可以在不同的机器上编译。可以说是一种高级汇编语言，适合于一些直接和硬件打交道的软件，比如驱动程序，和单片机控制程序等</p>
<h3 id="相同的"><a href="#相同的" class="headerlink" title="相同的"></a>相同的</h3><ul>
<li>基本数据结构、变量、常量</li>
<li>运算符、判断、和循环</li>
<li>函数</li>
<li>字符串 结构体(可能有所不同)</li>
<li>main函数主程序的入口点</li>
</ul>
<h3 id="不同"><a href="#不同" class="headerlink" title="不同"></a>不同</h3><p>C# 没有指针的概念<br>C# 不需要预处理和头文件</p>
<h2 id="一些关键字和概念"><a href="#一些关键字和概念" class="headerlink" title="一些关键字和概念"></a>一些关键字和概念</h2><h3 id="变量的定义"><a href="#变量的定义" class="headerlink" title="变量的定义"></a>变量的定义</h3><p>type variable_list<br>type 必须是一个有效的 C 数据类型，可以是 char、w_char、int、float、double、bool 或任何用户自定义的对象</p>
<p><strong>extern</strong> int d = 3, f = 5;    // d 和 f 的声明与初始化<br><strong>extern</strong> 关键字<br>变量的声明有两种情况：<br>1、一种是需要建立存储空间的。例如：int a 在声明的时候就已经建立了存储空间。<br>2、另一种是不需要建立存储空间的，通过使用extern关键字声明变量名而不定义它。 例如：extern int a 其中变量 a 可以在别的文件中定义的。<br>除非有extern关键字，否则都是变量的定义。<br>extern int i; //声明，不是定义<br>int i; //声明，也是定义</p>
<h3 id="存储类"><a href="#存储类" class="headerlink" title="存储类"></a>存储类</h3><blockquote>
<ul>
<li><p><strong>auto</strong> 局部变量默认存储类，类似C# 中局部变量默认private</p>
</li>
<li><p><strong>register 存储类</strong>用于定义存储在寄存器中而不是 RAM 中的局部变量。这意味着变量的最大尺寸等于寄存器的大小（通常是一个词），且不能对它应用一元的 ‘&amp;’ 运算符（因为它没有内存位置）。</p>
</li>
<li><strong>static 存储类</strong> 指示编译器在程序的生命周期内保持局部变量的存在，而不需要在每次它进入和离开作用域时进行创建和销毁。因此，使用 static 修饰局部变量可以在函数调用之间保持局部变量的值。<br>static 修饰符也可以应用于全局变量。当 static 修饰全局变量时，会使变量的作用域限制在声明它的文件内。<br>static 是全局变量的默认存储类，以下两个变量 (count 和 road) 都有一个 static 存储类。</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">static int Count;</div><div class="line">int Road;</div><div class="line"></div><div class="line">main()</div><div class="line">&#123;</div><div class="line">    printf(&quot;%d\n&quot;, Count);</div><div class="line">    printf(&quot;%d\n&quot;, Road);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><strong>extern 存储类</strong><br>extern 存储类用于提供一个全局变量的引用，全局变量对所有的程序文件都是可见的。当您使用 ‘extern’ 时，对于无法初始化的变量，会把变量名指向一个之前定义过的存储位置。<br>当您有多个文件且定义了一个可以在其他文件中使用的全局变量或函数时，可以在其他文件中使用 extern 来得到已定义的变量或函数的引用。可以这么理解，extern 是用来在另一个文件中声明一个全局变量或函数。<br>类似 java或C#中的 public</li>
</ul>
</blockquote>
<h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><ul>
<li>算术运算符</li>
<li>关系运算符</li>
<li>逻辑运算符</li>
<li>位运算符</li>
<li>赋值运算符</li>
<li>杂项运算符</li>
</ul>
<table>
<thead>
<tr>
<th>运算符</th>
<th style="text-align:left">描述</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td style="text-align:left">把两个操作数相加</td>
<td style="text-align:left">A + B 将得到 30</td>
</tr>
<tr>
<td>-</td>
<td style="text-align:left">从第一个操作数中减去第二个操作数</td>
<td style="text-align:left">A - B 将得到 -10</td>
</tr>
<tr>
<td>*</td>
<td style="text-align:left">自减运算符，整数值减少 1</td>
<td style="text-align:left">A * B 将得到 200</td>
</tr>
<tr>
<td>/</td>
<td style="text-align:left">分子除以分母</td>
<td style="text-align:left">B / A 将得到 2</td>
</tr>
<tr>
<td>%</td>
<td style="text-align:left">分子除以分母</td>
<td style="text-align:left">B % A 将得到 0</td>
</tr>
<tr>
<td>++</td>
<td style="text-align:left">自增运算符，整数值增加 1</td>
<td style="text-align:left">A++ 将得到 11</td>
</tr>
<tr>
<td>–</td>
<td style="text-align:left">自减运算符，整数值减少 1</td>
<td style="text-align:left">A– 将得到 9</td>
</tr>
</tbody>
</table>
<p>位运算符<br>位运算符作用于位，并逐位执行操作。&amp;、 | 和 ^ 的真值表如下所示：</p>
<table>
<thead>
<tr>
<th>p</th>
<th>q</th>
<th>p &amp; q</th>
<th>p &#124; q</th>
<th style="text-align:right">p ^ q</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table>
<h3 id="判断符"><a href="#判断符" class="headerlink" title="判断符"></a>判断符</h3><p>if<br>if…else<br>if…else if…else;<br>switch语句</p>
<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><p>for 循环<br>while 循环</p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p><strong>定义函数</strong><br>C 语言中的函数定义的一般形式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">return_type function_name( parameter list )</div><div class="line">&#123;</div><div class="line">   body of the function</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p><strong>声明数组</strong><br>在 C 中要声明一个数组，需要指定元素的类型和元素的数量，如下所示：<br><figure class="highlight plain"><figcaption><span>arrayName [ arraySize ];```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">这叫做一维数组。arraySize 必须是一个大于零的整数常量，type 可以是任意有效的 C 数据类型。例如，要声明一个类型为 double 的包含 10 个元素的数组 balance，声明语句如下：</div><div class="line">```double balance[10];</div></pre></td></tr></table></figure></p>
<p><strong>初始化数组</strong><br>在 C 中，您可以逐个初始化数组，也可以使用一个初始化语句，如下所示：<br><figure class="highlight plain"><figcaption><span>balance[5] = &#123;1000.0, 2.0, 3.4, 7.0, 50.0&#125;;```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">大括号 &#123; &#125; 之间的值的数目不能大于我们在数组声明时在方括号 [ ] 中指定的元素数目。</div><div class="line">如果您省略掉了数组的大小，数组的大小则为初始化时元素的个数。因此，如果：</div><div class="line">```double balance[] = &#123;1000.0, 2.0, 3.4, 7.0, 50.0&#125;;</div></pre></td></tr></table></figure></p>
<h3 id="C-指针"><a href="#C-指针" class="headerlink" title="C 指针"></a>C 指针</h3><p>学习 C 语言的指针既简单又有趣。通过指针，可以简化一些 C 编程任务的执行，还有一些任务，如动态内存分配，没有指针是无法执行的。所以，想要成为一名优秀的 C 程序员，学习指针是很有必要的。<br>正如您所知道的，每一个变量都有一个内存位置，每一个内存位置都定义了可使用连字号（&amp;）运算符访问的地址，它表示了在内存中的一个地址。请看下面的实例，它将输出定义的变量地址：</p>
<p><strong>什么是指针？</strong><br>指针是一个变量，其值为另一个变量的地址，即，内存位置的直接地址。就像其他变量或常量一样，您必须在使用指针存储其他变量地址之前，对其进行声明。指针变量声明的一般形式为：<br><figure class="highlight plain"><figcaption><span>*var-name;```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">在这里，type 是指针的基类型，它必须是一个有效的 C 数据类型，var-name 是指针变量的名称。用来声明指针的星号 * 与乘法中使用的星号是相同的。但是，在这个语句中，星号是用来指定一个变量是指针。以下是有效的指针声明：</div></pre></td></tr></table></figure></p>
<p>int    <em>ip;    /</em> 一个整型的指针 <em>/<br>double </em>dp;    /<em> 一个 double 型的指针 </em>/<br>float  <em>fp;    /</em> 一个浮点型的指针 <em>/<br>char   </em>ch;     /<em> 一个字符型的指针 </em>/<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">所有指针的值的实际数据类型，不管是整型、浮点型、字符型，还是其他的数据类型，都是一样的，都是一个代表内存地址的长的十六进制数。不同数据类型的指针之间唯一的不同是，指针所指向的变量或常量的数据类型不同。</div><div class="line"></div><div class="line">**C 指针详解**</div><div class="line">在 C 中，有很多指针相关的概念，这些概念都很简单，但是都很重要。下面列出了 C 程序员必须清楚的一些与指针相关的重要概念：</div><div class="line"></div><div class="line">* [指针的算术运算](http://www.runoob.com/cprogramming/c-pointer-arithmetic.html)	可以对指针进行四种算术运算：++、--、+、-</div><div class="line">* [指针数组](http://www.runoob.com/cprogramming/c-array-of-pointers.html)	可以定义用来存储指针的数组。</div><div class="line">* [指向指针的指针](http://www.runoob.com/cprogramming/c-pointer-to-pointer.html)	C 允许指向指针的指针。</div><div class="line">* [传递指针给函数](http://www.runoob.com/cprogramming/c-passing-pointers-to-functions.html)	通过引用或地址传递参数，使传递的参数在调用函数中被改变。</div><div class="line">* [从函数返回指针](http://www.runoob.com/cprogramming/c-return-pointer-from-functions.html)	C 允许函数返回指针到局部变量、静态变量和动态内存分配。</div><div class="line"></div><div class="line"></div><div class="line">### 函数指针</div><div class="line"></div><div class="line">函数指针是指向函数的指针变量。</div><div class="line">通常我们说的指针变量是指向一个整型、字符型或数组等变量，而函数指针是指向函数。</div><div class="line">函数指针可以像一般函数一样，用于调用函数、传递参数。</div><div class="line">函数指针变量的声明：</div></pre></td></tr></table></figure></p>
<p>typedef int (*fun_ptr)(int,int); // 声明一个指向同样参数、返回值的函数指针类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">** 回调函数 **</div><div class="line">**函数指针作为某个函数的参数**</div><div class="line">函数指针变量可以作为某个函数的参数来使用的，回调函数就是一个通过函数指针调用的函数。</div><div class="line">简单讲：回调函数是由别人的函数执行时调用你实现的函数。</div><div class="line">实例</div><div class="line">实例中 populate_array 函数定义了三个参数，其中第三个参数是函数的指针，通过该函数来设置数组的值。</div><div class="line">实例中我们定义了回调函数 getNextRandomValue，它返回一个随机值，它作为一个函数指针传递给 populate_array 函数。</div><div class="line">populate_array 将调用 10 次回调函数，并将回调函数的返回值赋值给数组。</div><div class="line">实例</div><div class="line">``` </div><div class="line">#include &lt;stdlib.h&gt;  </div><div class="line">#include &lt;stdio.h&gt;</div><div class="line"> </div><div class="line">// 回调函数</div><div class="line">void populate_array(int *array, size_t arraySize, int (*getNextValue)(void))</div><div class="line">&#123;</div><div class="line">    for (size_t i=0; i&lt;arraySize; i++)</div><div class="line">        array[i] = getNextValue();</div><div class="line">&#125;</div><div class="line"> </div><div class="line">// 获取随机值</div><div class="line">int getNextRandomValue(void)</div><div class="line">&#123;</div><div class="line">    return rand();</div><div class="line">&#125;</div><div class="line"> </div><div class="line">int main(void)</div><div class="line">&#123;</div><div class="line">    int myarray[10];</div><div class="line">    populate_array(myarray, 10, getNextRandomValue);</div><div class="line">    for(int i = 0; i &lt; 10; i++) &#123;</div><div class="line">        printf(&quot;%d &quot;, myarray[i]);</div><div class="line">    &#125;</div><div class="line">    printf(&quot;\n&quot;);</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="C-字符串"><a href="#C-字符串" class="headerlink" title="C 字符串"></a>C 字符串</h3><p>在 C 语言中，字符串实际上是使用 null 字符 ‘\0’ 终止的一维字符数组。因此，一个以 null 结尾的字符串，包含了组成字符串的字符。<br>下面的声明和初始化创建了一个 “Hello” 字符串。由于在数组的末尾存储了空字符，所以字符数组的大小比单词 “Hello” 的字符数多一个。</p>
<h2 id="C-结构体"><a href="#C-结构体" class="headerlink" title="C 结构体"></a>C 结构体</h2><h3 id="定义结构"><a href="#定义结构" class="headerlink" title="定义结构"></a>定义结构</h3><p>为了定义结构，您必须使用 struct 语句。struct 语句定义了一个包含多个成员的新的数据类型，struct 语句的格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">struct [structure tag]</div><div class="line">&#123;</div><div class="line">   member definition;</div><div class="line">   member definition;</div><div class="line">   ...</div><div class="line">   member definition;</div><div class="line">&#125; [one or more structure variables];</div></pre></td></tr></table></figure>
<p>structure tag 是可选的，每个 member definition 是标准的变量定义，比如 int i; 或者 float f; 或者其他有效的变量定义。在结构定义的末尾，最后一个分号之前，您可以指定一个或多个结构变量，这是可选的。下面是声明 Book 结构的方式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">struct Books</div><div class="line">&#123;</div><div class="line">   char  title[50];</div><div class="line">   char  author[50];</div><div class="line">   char  subject[100];</div><div class="line">   int   book_id;</div><div class="line">&#125; book;</div></pre></td></tr></table></figure></p>
<h3 id="共用体"><a href="#共用体" class="headerlink" title="共用体"></a>共用体</h3><p>共用体是一种特殊的数据类型，允许您在相同的内存位置存储不同的数据类型。您可以定义一个带有多成员的共用体，但是任何时候只能有一个成员带有值。共用体提供了一种使用相同的内存位置的有效方式。</p>
<p>定义共用体<br>为了定义共用体，您必须使用 union 语句，方式与定义结构类似。union 语句定义了一个新的数据类型，带有多个成员。union 语句的格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">union [union tag]</div><div class="line">&#123;</div><div class="line">   member definition;</div><div class="line">   member definition;</div><div class="line">   ...</div><div class="line">   member definition;</div><div class="line">&#125; [one or more union variables];</div></pre></td></tr></table></figure>
<p>union tag 是可选的，每个 member definition 是标准的变量定义，比如 int i; 或者 float f; 或者其他有效的变量定义。在共用体定义的末尾，最后一个分号之前，您可以指定一个或多个共用体变量，这是可选的。下面定义一个名为 Data 的共用体类型，有三个成员 i、f 和 str：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">union Data</div><div class="line">&#123;</div><div class="line">   int i;</div><div class="line">   float f;</div><div class="line">   char  str[20];</div><div class="line">&#125; data;</div></pre></td></tr></table></figure></p>
<h3 id="C-位域"><a href="#C-位域" class="headerlink" title="C 位域"></a>C 位域</h3><p>如果程序的结构中包含多个开关量，只有 TRUE/FALSE 变量，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">struct</div><div class="line">&#123;</div><div class="line">  unsigned int widthValidated;</div><div class="line">  unsigned int heightValidated;</div><div class="line">&#125; status;</div></pre></td></tr></table></figure></p>
<p>这种结构需要 8 字节的内存空间，但在实际上，在每个变量中，我们只存储 0 或 1。在这种情况下，C 语言提供了一种更好的利用内存空间的方式。如果您在结构内使用这样的变量，您可以定义变量的宽度来告诉编译器，您将只使用这些字节。例如，上面的结构可以重写成：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">struct</div><div class="line">&#123;</div><div class="line">  unsigned int widthValidated : 1;</div><div class="line">  unsigned int heightValidated : 1;</div><div class="line">&#125; status;</div></pre></td></tr></table></figure>
<h3 id="C-typedef"><a href="#C-typedef" class="headerlink" title="C typedef"></a>C typedef</h3><p>C 语言提供了 typedef 关键字，您可以使用它来为类型取一个新的名字。下面的实例为单字节数字定义了一个术语 BYTE：<br><figure class="highlight plain"><figcaption><span>unsigned char BYTE;```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### C 输入 &amp; 输出</div><div class="line"></div><div class="line">文件指针是访问文件的方式，本节将讲解如何从屏幕读取值以及如何把结果输出到屏幕上。</div><div class="line">C 语言中的 I/O (输入/输出) 通常使用 printf() 和 scanf() 两个函数。</div><div class="line">scanf() 函数用于从标准输入（键盘）读取并格式化， printf() 函数发送格式化输出到标准输出（屏幕）。</div><div class="line"></div><div class="line">**getchar() &amp; putchar() 函数**</div><div class="line">int getchar(void) 函数从屏幕读取下一个可用的字符，并把它返回为一个整数。这个函数在同一个时间内只会读取一个单一的字符。您可以在循环内使用这个方法，以便从屏幕上读取多个字符。</div><div class="line">int putchar(int c) 函数把字符输出到屏幕上，并返回相同的字符。这个函数在同一个时间内只会输出一个单一的字符。您可以在循环内使用这个方法，以便在屏幕上输出多个字符。</div><div class="line">请看下面的实例：</div><div class="line">实例</div></pre></td></tr></table></figure></p>
<p>#include <stdio.h></stdio.h></p>
<p>int main( )<br>{<br>   int c;</p>
<p>   printf( “Enter a value :”);<br>   c = getchar( );</p>
<p>   printf( “\nYou entered: “);<br>   putchar( c );<br>   printf( “\n”);<br>   return 0;<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">当上面的代码被编译和执行时，它会等待您输入一些文本，当您输入一个文本并按下回车键时，程序会继续并只会读取一个单一的字符，显示如下：</div></pre></td></tr></table></figure></p>
<p>$./a.out<br>Enter a value :runoob</p>
<p>You entered: r<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">**scanf() 和 printf() 函数**</div><div class="line">int scanf(const char *format, ...) 函数从标准输入流 stdin 读取输入，并根据提供的 format 来浏览输入。</div><div class="line">int printf(const char *format, ...) 函数把输出写入到标准输出流 stdout ，并根据提供的格式产生输出。</div><div class="line">format 可以是一个简单的常量字符串，但是您可以分别指定 %s、%d、%c、%f 等来输出或读取字符串、整数、字符或浮点数。还有许多其他可用的格式选项，可以根据需要使用。如需了解完整的细节，可以查看这些函数的参考手册。现在让我们通过下面这个简单的实例来加深理解：</div><div class="line">实例</div></pre></td></tr></table></figure></p>
<p>#include <stdio.h><br>int main( ) {</stdio.h></p>
<p>   char str[100];<br>   int i;</p>
<p>   printf( “Enter a value :”);<br>   scanf(“%s %d”, str, &amp;i);</p>
<p>   printf( “\nYou entered: %s %d “, str, i);<br>   printf(“\n”);<br>   return 0;<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">当上面的代码被编译和执行时，它会等待您输入一些文本，当您输入一个文本并按下回车键时，程序会继续并读取输入，显示如下：</div></pre></td></tr></table></figure></p>
<p>$./a.out<br>Enter a value :runoob 123</p>
<p>You entered: runoob 123<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">**在这里，应当指出的是，scanf() 期待输入的格式与您给出的 %s 和 %d 相同，这意味着您必须提供有效的输入，比如 &quot;string integer&quot;，如果您提供的是 &quot;string string&quot; 或 &quot;integer integer&quot;，它会被认为是错误的输入。另外，在读取字符串时，只要遇到一个空格，scanf() 就会停止读取，所以 &quot;this is test&quot; 对 scanf() 来说是三个字符串。**</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">### C语言中printf 格式化输出函数</div><div class="line">一直记不住，在网上找了一段笔记</div><div class="line"></div><div class="line">C语言中规定数据输出方式，具体如下：</div><div class="line"></div><div class="line">1.type 含义如下：</div><div class="line"></div><div class="line">d 有符号10进制整数 </div><div class="line">%d 有符号10进制整数 %ld 长整型 %hd短整型  </div><div class="line"></div><div class="line">%i 有符号10进制整数 （%i和%d 没有区别，%i 是老式写法，都是整型格式。）</div><div class="line"></div><div class="line">%o 无符号8进制整数 </div><div class="line"></div><div class="line">%u 无符号10进制整数</div><div class="line">%hu 无符号短整形 %u无符号整形 %lu无符号长整形</div><div class="line"></div><div class="line">%x 无符号的16进制数字，并以小写abcdef表示</div><div class="line"></div><div class="line">%X 无符号的16进制数字，并以大写ABCDEF表示</div><div class="line"></div><div class="line">%f：输入输出为浮点型 %lf双精度浮点型</div><div class="line"></div><div class="line">%E/e 用科学表示格式的浮点数</div><div class="line"></div><div class="line">%g 使用%f和%e表示中的总的位数表示最短的来表示浮点数 G 同g格式，但表示为指数</div><div class="line"></div><div class="line">%c 输入输出为单个字符 </div><div class="line"></div><div class="line">%s 输入输出为字符串</div><div class="line"></div><div class="line">% 显示百分号本身</div><div class="line"></div><div class="line"> </div><div class="line">## C 文件读写</div><div class="line">**C 文件读写**</div><div class="line"> C 程序员如何创建、打开、关闭文本文件或二进制文件。</div><div class="line">一个文件，无论它是文本文件还是二进制文件，都是代表了一系列的字节。C 语言不仅提供了访问顶层的函数，也提供了底层（OS）调用来处理存储设备上的文件。本章将讲解文件管理的重要调用。</div><div class="line">**打开文件**</div><div class="line">您可以使用 fopen( ) 函数来创建一个新的文件或者打开一个已有的文件，这个调用会初始化类型 FILE 的一个对象，类型 FILE 包含了所有用来控制流的必要的信息。下面是这个函数调用的原型：</div><div class="line">```FILE *fopen( const char * filename, const char * mode );</div></pre></td></tr></table></figure></p>
<p>在这里，filename 是字符串，用来命名文件，访问模式 mode 的值可以是下列值中的一个：</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>打开一个已有的文本文件，允许读取文件。</td>
</tr>
<tr>
<td>w</td>
<td>打开一个文本文件，允许写入文件。如果文件不存在，则会创建一个新文件。在这里，您的程序会从文件的开头写入内容。</td>
</tr>
<tr>
<td>a</td>
<td>打开一个文本文件，以追加模式写入文件。如果文件不存在，则会创建一个新文件。在这里，您的程序会在已有的文件内容中追加内容。</td>
</tr>
<tr>
<td>r+</td>
<td>打开一个文本文件，允许读写文件。</td>
</tr>
<tr>
<td>w+</td>
<td>打开一个文本文件，允许读写文件。如果文件已存在，则文件会被截断为零长度，如果文件不存在，则会创建一个新文件。</td>
</tr>
<tr>
<td>a+</td>
<td>打开一个文本文件，允许读写文件。如果文件不存在，则会创建一个新文件。读取会从文件的开头开始，写入则只能是追加模式。</td>
</tr>
</tbody>
</table>
<p>如果处理的是二进制文件，则需使用下面的访问模式来取代上面的访问模式：<br><code>&quot;rb&quot;, &quot;wb&quot;, &quot;ab&quot;, &quot;rb+&quot;, &quot;r+b&quot;, &quot;wb+&quot;, &quot;w+b&quot;, &quot;ab+&quot;, &quot;a+b&quot;</code></p>
<p><strong>关闭文件</strong><br>为了关闭文件，请使用 fclose( ) 函数。函数的原型如下：<br> <figure class="highlight plain"><figcaption><span>fclose( FILE *fp );```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">如果成功关闭文件，fclose( ) 函数返回零，如果关闭文件时发生错误，函数返回 EOF。这个函数实际上，会清空缓冲区中的数据，关闭文件，并释放用于该文件的所有内存。EOF 是一个定义在头文件 stdio.h 中的常量。</div><div class="line">C 标准库提供了各种函数来按字符或者以固定长度字符串的形式读写文件。</div><div class="line"></div><div class="line">**写入文件**</div><div class="line">下面是把字符写入到流中的最简单的函数：</div><div class="line">```int fputc( int c, FILE *fp );</div></pre></td></tr></table></figure></p>
<p>函数 fputc() 把参数 c 的字符值写入到 fp 所指向的输出流中。如果写入成功，它会返回写入的字符，如果发生错误，则会返回 EOF。您可以使用下面的函数来把一个以 null 结尾的字符串写入到流中：<br><figure class="highlight plain"><figcaption><span>fputs( const char *s, FILE *fp );```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">函数 fputs() 把字符串 s 写入到 fp 所指向的输出流中。如果写入成功，它会返回一个非负值，如果发生错误，则会返回 EOF。您也可以使用 int fprintf(FILE *fp,const char *format, ...) 函数来写把一个字符串写入到文件中。尝试下面的实例：</div><div class="line">注意：请确保您有可用的 /tmp 目录，如果不存在该目录，则需要在您的计算机上先创建该目录。</div><div class="line">实例</div></pre></td></tr></table></figure></p>
<p>#include <stdio.h></stdio.h></p>
<p>int main()<br>{<br>   FILE *fp = NULL;</p>
<p>   fp = fopen(“/tmp/test.txt”, “w+”);<br>   fprintf(fp, “This is testing for fprintf…\n”);<br>   fputs(“This is testing for fputs…\n”, fp);<br>   fclose(fp);<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">当上面的代码被编译和执行时，它会在 /tmp 目录中创建一个新的文件 test.txt，并使用两个不同的函数写入两行。接下来让我们来读取这个文件。</div><div class="line">读取文件</div><div class="line">下面是从文件读取单个字符的最简单的函数：</div><div class="line"></div><div class="line">```int fgetc( FILE * fp );</div></pre></td></tr></table></figure></p>
<p>fgetc() 函数从 fp 所指向的输入文件中读取一个字符。返回值是读取的字符，如果发生错误则返回 EOF。下面的函数允许您从流中读取一个字符串：</p>
<figure class="highlight plain"><figcaption><span>*fgets( char *buf, int n, FILE *fp );```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">函数 fgets() 从 fp 所指向的输入流中读取 n - 1 个字符。它会把读取的字符串复制到缓冲区 buf，并在最后追加一个 null 字符来终止字符串。</div><div class="line">如果这个函数在读取最后一个字符之前就遇到一个换行符 &apos;\n&apos; 或文件的末尾 EOF，则只会返回读取到的字符，包括换行符。您也可以使用</div><div class="line"></div><div class="line">``` int fscanf(FILE *fp, const char *format, ...)</div></pre></td></tr></table></figure>
<p>函数来从文件中读取字符串，但是在遇到第一个空格字符时，它会停止读取。<br>实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line"> </div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">   FILE *fp = NULL;</div><div class="line">   char buff[255];</div><div class="line"> </div><div class="line">   fp = fopen(&quot;/tmp/test.txt&quot;, &quot;r&quot;);</div><div class="line">   fscanf(fp, &quot;%s&quot;, buff);</div><div class="line">   printf(&quot;1 : %s\n&quot;, buff );</div><div class="line"> </div><div class="line">   fgets(buff, 255, (FILE*)fp);</div><div class="line">   printf(&quot;2: %s\n&quot;, buff );</div><div class="line">   </div><div class="line">   fgets(buff, 255, (FILE*)fp);</div><div class="line">   printf(&quot;3: %s\n&quot;, buff );</div><div class="line">   fclose(fp);</div><div class="line"> </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当上面的代码被编译和执行时，它会读取上一部分创建的文件，产生下列结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1 : This</div><div class="line">2: is testing for fprintf...</div><div class="line"></div><div class="line">3: This is testing for fputs...</div></pre></td></tr></table></figure></p>
<p>首先，fscanf() 方法只读取了 This，因为它在后边遇到了一个空格。其次，调用 fgets() 读取剩余的部分，直到行尾。最后，调用 fgets() 完整地读取第二行。</p>
<p><strong>二进制 I/O 函数</strong><br>下面两个函数用于二进制输入和输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">size_t fread(void *ptr, size_t size_of_elements, </div><div class="line">             size_t number_of_elements, FILE *a_file);</div><div class="line">              </div><div class="line">size_t fwrite(const void *ptr, size_t size_of_elements, </div><div class="line">             size_t number_of_elements, FILE *a_file);</div></pre></td></tr></table></figure></p>
<p>这两个函数都是用于存储块的读写 - 通常是数组或结构体。</p>
<h2 id="C-预处理器"><a href="#C-预处理器" class="headerlink" title="C 预处理器"></a>C 预处理器</h2><p>C 预处理器不是编译器的组成部分，但是它是编译过程中一个单独的步骤。简言之，C 预处理器只不过是一个文本替换工具而已，它们会指示编译器在实际编译之前完成所需的预处理。我们将把 C 预处理器（C Preprocessor）简写为 CPP。<br>所有的预处理器命令都是以井号（#）开头。它必须是第一个非空字符，为了增强可读性，预处理器指令应从第一列开始。下面列出了所有重要的预处理器指令：</p>
<table>
<thead>
<tr>
<th>指令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>#define</td>
<td>定义宏</td>
</tr>
<tr>
<td>#include</td>
<td>包含一个源代码文件</td>
</tr>
<tr>
<td>#undef</td>
<td>取消已定义的宏</td>
</tr>
<tr>
<td>#ifdef</td>
<td>如果宏已经定义，则返回真</td>
</tr>
<tr>
<td>#ifndef</td>
<td>如果宏没有定义，则返回真</td>
</tr>
<tr>
<td>#if</td>
<td>如果给定条件为真，则编译下面代码</td>
</tr>
<tr>
<td>#else</td>
<td>#if 的替代方案</td>
</tr>
<tr>
<td>#elif</td>
<td>如果前面的 #if 给定条件不为真，当前条件为真，则编译下面代码</td>
</tr>
<tr>
<td>#endif</td>
<td>结束一个 #if……#else 条件编译块</td>
</tr>
<tr>
<td>#error</td>
<td>当遇到标准错误时，输出错误消息</td>
</tr>
<tr>
<td>#pragma</td>
<td>使用标准化方法，向编译器发布特殊的命令到编译器中</td>
</tr>
</tbody>
</table>
<p><strong>预处理器实例</strong><br>分析下面的实例来理解不同的指令。<br><figure class="highlight plain"><figcaption><span>MAX_ARRAY_LENGTH 20 ```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">这个指令告诉 CPP 把所有的 MAX_ARRAY_LENGTH 替换为 20。使用 #define 定义常量来增强可读性。</div></pre></td></tr></table></figure></p>
<p>#include <stdio.h></stdio.h></p>
<p>#include “myheader.h”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">### 错误处理</div><div class="line">**errno、perror() 和 strerror()***</div><div class="line"></div><div class="line">C 语言提供了 perror() 和 strerror() 函数来显示与 errno 相关的文本消息。</div><div class="line">* perror() 函数显示您传给它的字符串，后跟一个冒号、一个空格和当前 errno 值的文本表示形式。</div><div class="line">* strerror() 函数，返回一个指针，指针指向当前 errno 值的文本表示形式。</div><div class="line"></div><div class="line">让我们来模拟一种错误情况，尝试打开一个不存在的文件。您可以使用多种方式来输出错误消息，在这里我们使用函数来演示用法。另外有一点需要注意，您应该使用 stderr 文件流来输出所有的错误。</div></pre></td></tr></table></figure></p>
<p>#include <stdio.h></stdio.h></p>
<p>#include <errno.h></errno.h></p>
<p>#include <string.h></string.h></p>
<p>extern int errno ;</p>
<p>int main ()<br>{<br>   FILE * pf;<br>   int errnum;<br>   pf = fopen (“unexist.txt”, “rb”);<br>   if (pf == NULL)<br>   {<br>      errnum = errno;<br>      fprintf(stderr, “错误号: %d\n”, errno);<br>      perror(“通过 perror 输出错误”);<br>      fprintf(stderr, “打开文件错误: %s\n”, strerror( errnum ));<br>   }<br>   else<br>   {<br>      fclose (pf);<br>   }<br>   return 0;<br>}</p>
<p>```</p>
<h2 id="C语言中的内存管理"><a href="#C语言中的内存管理" class="headerlink" title="C语言中的内存管理"></a>C语言中的内存管理</h2><table>
<thead>
<tr>
<th>序号</th>
<th>函数和描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><strong>void *calloc(int num, int size);</strong>在内存中动态地分配 num 个长度为 size 的连续空间，并将每一个字节都初始化为 0。所以它的结果是分配了 num*size 个字节长度的内存空间，并且每个字节的值都是0。</td>
</tr>
<tr>
<td>2</td>
<td><strong>void free(void *address);</strong> 该函数释放 address 所指向的内存块,释放的是动态分配的内存空间。</td>
</tr>
<tr>
<td>3</td>
<td><strong>void *malloc(int num);</strong> 在堆区分配一块指定大小的内存空间，用来存放数据。这块内存空间在函数执行完成后不会被初始化，它们的值是未知的。</td>
</tr>
<tr>
<td>4</td>
<td><strong>void <em>realloc(void </em>address, int newsize);</strong> 该函数重新分配内存，把内存扩展到 newsize。</td>
</tr>
</tbody>
</table>
<h3 id="其他引用"><a href="#其他引用" class="headerlink" title="其他引用"></a>其他引用</h3><p>我相信你也知道计算机内部全都是用二进制表示信息。在机器中，每一条指令也是用二进制数来表示的。我们很难记住这些数和指令的对应关系，它的表现也不够直观。所以计算机科学家们开始用助记符（比如mov、jmp等）来表示指令。这被称作汇编语言。尽管相比于徒手撸机器码有进步，但是说到底汇编语言也只是很浅的一层抽象。实现一个复杂的功能，也许要写很长的一段代码。更可怕的是，许多汇编代码移植性不好，切换到另一个平台上需要改很多代码。因此开发大型软件很不方便。</p>
  
	</div>
		<footer class="article-footer clearfix">




<div class="article-share" id="share">

  
<!-- JiaThis Button BEGIN -->
<div class=share-jiathis>
<div class="jiathis_style_24x24">
    <a class="jiathis_button_tsina" title="分享到微博"><span class="jiathis_txt jtico jtico_tsina"></span></a>
    <a class="jiathis_button_weixin" title="分享到微信"><span class="jiathis_txt jtico jtico_weixin"></span></a>
    <a class="jiathis_button_renren" title="分享到人人网"><span class="jiathis_txt jtico jtico_renren"></span></a>
    <a class="jiathis_button_qzone" title="分享到QQ空间"><span class="jiathis_txt jtico jtico_qzone"></span></a>
    <a class="jiathis_button_googleplus" title="分享到Google+"><span class="jiathis_txt jtico jtico_googleplus"></span></a>
    <a class="jiathis_button_douban" title="分享到豆瓣"><span class="jiathis_txt jtico jtico_douban"></span></a> 
    <a href="http://www.jiathis.com/share?uid=2142589" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
    <a class="jiathis_counter_style"></a>
</div>
 
<script type="text/javascript" >
    var jiathis_config={
    data_track_clickback:true,
    sm:"copy,renren,cqq",
    pic:"",
    summary:"",
    
  </script> 

<!-- JiaThis Button END -->
<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=2142589
2142589" charset="utf-8"></script>      

</div>
 



</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 

<div class="next">
<a href="/2017/10/14/17年最后一个假期/"  title="17年最后一个假期">
 <strong>NEXT:</strong><br/> 
 <span>17年最后一个假期
</span>
</a>
</div>

</nav>

	
</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#C-语言学习笔记"><span class="toc-number">1.</span> <span class="toc-text">C 语言学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#C-和-C"><span class="toc-number">1.1.</span> <span class="toc-text">C# 和 C</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#个人感觉"><span class="toc-number">1.2.</span> <span class="toc-text">个人感觉</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#相同的"><span class="toc-number">1.2.1.</span> <span class="toc-text">相同的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不同"><span class="toc-number">1.2.2.</span> <span class="toc-text">不同</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一些关键字和概念"><span class="toc-number">1.3.</span> <span class="toc-text">一些关键字和概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#变量的定义"><span class="toc-number">1.3.1.</span> <span class="toc-text">变量的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#存储类"><span class="toc-number">1.3.2.</span> <span class="toc-text">存储类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#运算符"><span class="toc-number">1.3.3.</span> <span class="toc-text">运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#判断符"><span class="toc-number">1.3.4.</span> <span class="toc-text">判断符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#循环"><span class="toc-number">1.3.5.</span> <span class="toc-text">循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数"><span class="toc-number">1.3.6.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数组"><span class="toc-number">1.3.7.</span> <span class="toc-text">数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-指针"><span class="toc-number">1.3.8.</span> <span class="toc-text">C 指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-字符串"><span class="toc-number">1.3.9.</span> <span class="toc-text">C 字符串</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C-结构体"><span class="toc-number">1.4.</span> <span class="toc-text">C 结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定义结构"><span class="toc-number">1.4.1.</span> <span class="toc-text">定义结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#共用体"><span class="toc-number">1.4.2.</span> <span class="toc-text">共用体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-位域"><span class="toc-number">1.4.3.</span> <span class="toc-text">C 位域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-typedef"><span class="toc-number">1.4.4.</span> <span class="toc-text">C typedef</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C-预处理器"><span class="toc-number">1.5.</span> <span class="toc-text">C 预处理器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C语言中的内存管理"><span class="toc-number">1.6.</span> <span class="toc-text">C语言中的内存管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#其他引用"><span class="toc-number">1.6.1.</span> <span class="toc-text">其他引用</span></a></li></ol></li></ol></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
			<li><a href="/categories/hexo笔记/" title="hexo笔记">hexo笔记<sup>2</sup></a></li>
		
			<li><a href="/categories/python/" title="python">python<sup>1</sup></a></li>
		
			<li><a href="/categories/收集整理/" title="收集整理">收集整理<sup>1</sup></a></li>
		
			<li><a href="/categories/生活感想/" title="生活感想">生活感想<sup>1</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/hexo/" title="hexo">hexo<sup>2</sup></a></li>
		
			<li><a href="/tags/pymssql/" title="pymssql">pymssql<sup>1</sup></a></li>
		
			<li><a href="/tags/python/" title="python">python<sup>1</sup></a></li>
		
			<li><a href="/tags/个人感想/" title="个人感想">个人感想<sup>1</sup></a></li>
		
			<li><a href="/tags/博客搭建/" title="博客搭建">博客搭建<sup>1</sup></a></li>
		
			<li><a href="/tags/独立博客集合/" title="独立博客集合">独立博客集合<sup>1</sup></a></li>
		
			<li><a href="/tags/笔记/" title="笔记">笔记<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
   
					
						<li><a href="http://www.cnfeat.com" target="_blank" title="陈素封">陈素封</a></li>
					
					
						<li><a href="http://www.yanmin99.com" target="_blank" title="日积月累">日积月累</a></li>
					
					
						<li><a href="http://pkwans.com/" target="_blank" title="pkwan">pkwan</a></li>
					
					
						<li><a href="https://moeka.me/" target="_blank" title="moeka">moeka</a></li>
					
					
						<li><a href="http://hexo.io" target="_blank" title="Hexo">Hexo</a></li>
					
					
						<li><a href="http://qjzhixing.com" target="_blank" title="起今知行">起今知行</a></li>
					
      
    </ul>
</div>


  <div class="rsspart">
	<a href="/auom.xmlns" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello World <br/>
			.net 程序员，小码农外出务工人员，喜欢听歌喜欢看书</p>
	</section>
	 
	<div class="social-font clearfix">
		
		
		
		<a href="https://github.com/MartinFromCodes" target="_blank" title="github"></a>
		 
		
       
		<a href="mailto:rickgrimes@foxmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2017 
		
		<a href="http://yoursite.com" target="_blank" title="ClarWan">ClarWan</a>
		
		<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cspan id='cnzz_stat_icon_1263837031'   %3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263837031%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));
 
</script>
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>







  </body>
</html>
